{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nimport { deleteDeviceFromBasket } from \"../http/serviceAPI\";\nexport default class BasketStoreStore {\n  constructor() {\n    this._totalPrice = 0;\n    this._basket = [];\n    makeAutoObservable(this);\n  }\n\n  async setDeleteItemBasket(device, isAuth = false) {\n    if (isAuth) {\n      await deleteDeviceFromBasket(device.id).then(() => {\n        this._basket = this._basket.filter(item => item.id !== device.id);\n        this._totalPrice -= device.price * device.count;\n      });\n    } else {\n      this._basket = this._basket.filter(item => item.id !== device.id);\n      this._totalPrice -= device.price * device.count;\n      localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n    }\n  }\n\n  setBasket(item, isAuth = false) {\n    const checkDeviceInBasket = this._basket.findIndex(device => device.id === item.id);\n\n    if (checkDeviceInBasket < 0) {\n      this._basket = [...this._basket, {\n        count: 1,\n        ...item\n      }];\n      let totalPrice = 0;\n\n      this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n\n      this._totalPrice = totalPrice;\n    }\n\n    if (!isAuth) {\n      localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n    }\n  }\n\n  setDeleteAllDeviceFromBasket() {\n    this._totalPrice = 0;\n    return this._basket = [];\n  }\n\n  resetBasket() {\n    this._basket = [];\n    this._totalPrice = 0;\n    localStorage.removeItem('basket');\n  }\n\n  get Basket() {\n    return this._basket;\n  }\n\n  get Price() {\n    return this._totalPrice;\n  }\n\n}","map":{"version":3,"sources":["/Users/denismyachin/Downloads/online-store-master/front/src/store/BasketStore.js"],"names":["makeAutoObservable","deleteDeviceFromBasket","BasketStoreStore","constructor","_totalPrice","_basket","setDeleteItemBasket","device","isAuth","id","then","filter","item","price","count","localStorage","setItem","JSON","stringify","setBasket","checkDeviceInBasket","findIndex","totalPrice","forEach","Number","setDeleteAllDeviceFromBasket","resetBasket","removeItem","Basket","Price"],"mappings":"AAAA,SAAQA,kBAAR,QAAiC,MAAjC;AACA,SAAQC,sBAAR,QAAqC,oBAArC;AAEA,eAAe,MAAMC,gBAAN,CAAuB;AAClCC,EAAAA,WAAW,GAAG;AACV,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,OAAL,GAAe,EAAf;AACAL,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;;AAEwB,QAAnBM,mBAAmB,CAACC,MAAD,EAASC,MAAM,GAAG,KAAlB,EAAyB;AAC9C,QAAGA,MAAH,EAAW;AACP,YAAMP,sBAAsB,CAACM,MAAM,CAACE,EAAR,CAAtB,CAAkCC,IAAlC,CAAuC,MAAM;AAC/C,aAAKL,OAAL,GAAe,KAAKA,OAAL,CAAaM,MAAb,CAAoBC,IAAI,IAAIA,IAAI,CAACH,EAAL,KAAYF,MAAM,CAACE,EAA/C,CAAf;AACA,aAAKL,WAAL,IAAqBG,MAAM,CAACM,KAAP,GAAeN,MAAM,CAACO,KAA3C;AACH,OAHK,CAAN;AAIH,KALD,MAKO;AACH,WAAKT,OAAL,GAAe,KAAKA,OAAL,CAAaM,MAAb,CAAoBC,IAAI,IAAIA,IAAI,CAACH,EAAL,KAAYF,MAAM,CAACE,EAA/C,CAAf;AACA,WAAKL,WAAL,IAAqBG,MAAM,CAACM,KAAP,GAAeN,MAAM,CAACO,KAA3C;AAEAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAe,KAAKb,OAApB,CAA/B;AACH;AACJ;;AAEDc,EAAAA,SAAS,CAACP,IAAD,EAAOJ,MAAM,GAAG,KAAhB,EAAuB;AAC5B,UAAMY,mBAAmB,GAAG,KAAKf,OAAL,CAAagB,SAAb,CAAuBd,MAAM,IAAIA,MAAM,CAACE,EAAP,KAAcG,IAAI,CAACH,EAApD,CAA5B;;AACA,QAAGW,mBAAmB,GAAG,CAAzB,EAA4B;AACxB,WAAKf,OAAL,GAAe,CAAC,GAAG,KAAKA,OAAT,EAAkB;AAAES,QAAAA,KAAK,EAAE,CAAT;AAAY,WAAGF;AAAf,OAAlB,CAAf;AACA,UAAIU,UAAU,GAAG,CAAjB;;AACA,WAAKjB,OAAL,CAAakB,OAAb,CAAqBhB,MAAM,IAAIe,UAAU,IAAIE,MAAM,CAACjB,MAAM,CAACM,KAAP,GAAeN,MAAM,CAACO,KAAvB,CAAnD;;AACA,WAAKV,WAAL,GAAmBkB,UAAnB;AACH;;AAED,QAAG,CAACd,MAAJ,EAAY;AACRO,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAe,KAAKb,OAApB,CAA/B;AACH;AACJ;;AAEDoB,EAAAA,4BAA4B,GAAG;AAC3B,SAAKrB,WAAL,GAAmB,CAAnB;AACA,WAAO,KAAKC,OAAL,GAAe,EAAtB;AACH;;AAEDqB,EAAAA,WAAW,GAAG;AACV,SAAKrB,OAAL,GAAe,EAAf;AACA,SAAKD,WAAL,GAAmB,CAAnB;AACAW,IAAAA,YAAY,CAACY,UAAb,CAAwB,QAAxB;AACH;;AAGS,MAANC,MAAM,GAAG;AACT,WAAO,KAAKvB,OAAZ;AACH;;AAEQ,MAALwB,KAAK,GAAG;AACR,WAAO,KAAKzB,WAAZ;AACH;;AArDiC","sourcesContent":["import {makeAutoObservable} from \"mobx\";\nimport {deleteDeviceFromBasket} from \"../http/serviceAPI\";\n\nexport default class BasketStoreStore {\n    constructor() {\n        this._totalPrice = 0;\n        this._basket = [];\n        makeAutoObservable(this);\n    }\n\n    async setDeleteItemBasket(device, isAuth = false) {\n        if(isAuth) {\n            await deleteDeviceFromBasket(device.id).then(() => {\n                this._basket = this._basket.filter(item => item.id !== device.id);\n                this._totalPrice -=  device.price * device.count;\n            });\n        } else {\n            this._basket = this._basket.filter(item => item.id !== device.id);\n            this._totalPrice -=  device.price * device.count;\n\n            localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n        }\n    }\n\n    setBasket(item, isAuth = false) {\n        const checkDeviceInBasket = this._basket.findIndex(device => device.id === item.id);\n        if(checkDeviceInBasket < 0) {\n            this._basket = [...this._basket, { count: 1, ...item}];\n            let totalPrice = 0;\n            this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n            this._totalPrice = totalPrice;\n        }\n\n        if(!isAuth) {\n            localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n        }\n    }\n\n    setDeleteAllDeviceFromBasket() {\n        this._totalPrice = 0;\n        return this._basket = [];\n    }\n\n    resetBasket() {\n        this._basket = [];\n        this._totalPrice = 0;\n        localStorage.removeItem('basket');\n    }\n\n\n    get Basket() {\n        return this._basket;\n    }\n\n    get Price() {\n        return this._totalPrice;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}