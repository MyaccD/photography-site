{"ast":null,"code":"// import React, {useContext, useEffect, useState} from 'react';\n// import {Button, Col, Container, Dropdown, Form, Image, Modal, Row} from \"react-bootstrap\";\n// import {useParams, useHistory} from 'react-router-dom';\n// import {fetchDeletePhoto, fetchOnePhoto, updatePhotos} from \"../http/photoAPI\";\n// import {Context} from \"../index\";\n//  import {ADMIN_PHOTO_ROUTE} from \"../utils/consts\";\n// const PhotoPageEdit = () => {\n//     const {photo} = useContext(Context);\n//     const history = useHistory();\n//     const {id} = useParams();\n//     const [photoCurr, setPhotoCurr] = useState({});\n//     const [showMsg, setShowMsg] = useState(false);\n//     const [msg, setMsg] = useState(\"\");\n//     const [selectAlbum, setSelectAlbum] = useState({});\n//     const [img, setImg] = useState(\"\");\n//     const [imgFile, setImgFile] = useState(null);\n//     const [isDisabledPutBtn, setDisabledPutBtn] = useState(true);\n//     const deletePhoto = () => {\n//         fetchDeletePhoto(id).then(() => {\n//             history.push(ADMIN_PHOTO_ROUTE);\n//         })\n//     }\n//     const [show, setShow] = useState(false);\n//     const handleClose = () => setShow(false);\n//     const handleShow = () => setShow(true);\n//     const imgHandler = e => {\n//         e.preventDefault();\n//         const reader = new FileReader();\n//         reader.onload = () => {\n//             setImg(reader.result);\n//         };\n//         reader.readAsDataURL(e.target.files[0]);\n//         setImgFile(e.target.files[0]);\n//     }\n//     const putPhoto = () => {\n//         const formData = new FormData();\n//         formData.append('img', imgFile);\n//         formData.append('albumId', selectAlbum.id);\n//         updateServices(id, formData).then(data => {\n//             setShowMsg(true);\n//             setMsg(data);\n//             setTimeout(() => setShowMsg(true), 5000)\n//         });\n//     }\n//     useEffect(() => {\n//         let checkInfoVal = false;\n//         if(photoCurr.info && photoCurr.info.length !== info.length) {\n//             checkInfoVal = checkInfo();\n//         }\n//         if(photoCurr && photoCurr.album) {\n//             if(photoCurr.album.name !== selectAlbum.name ||\n//                 img\n//             ) {\n//                 setDisabledPutBtn(false);\n//             } else {\n//                 setDisabledPutBtn(true);\n//             }\n//         }\n//     }, [img]);\n//     useEffect(() => {\n//         fetchOnePhoto(id).then(data => {\n//             setPhotoCurr(data);\n//             setSelectAlbum(data.album);\n//         });\n//     }, [id]);\n//     return (\n//         <Container className=\"mt-3\">\n//             {showMsg && <Row className='d-flex, align-items-center justify-content-center'><div style={{background: '#28a745', marginLeft: 15, borderRadius: 5, color: 'white', padding: 6}}>\n//                 {msg}\n//             </div>\n//             </Row>}\n//             <Row className='mt-3'>\n//                 <Col xs={12}>\n//                     <Row>\n//                         <Col xs={1} className=\"d-flex align-items-center\">\n//                             id:\n//                         </Col>\n//                         <Col xs={11}>\n//                             {photoCurr.id}\n//                         </Col>\n//                     </Row>\n//                     {/*Album*/}\n//                     <Row>\n//                         <Col xs={1} className=\"d-flex align-items-center\">\n//                             Альбом:\n//                         </Col>\n//                         <Col xs={11}>\n//                             <Dropdown className=\"mt-2 mb-2\">\n//                                 <Dropdown.Toggle>{selectAlbum.name || \"Выберите тип\"}</Dropdown.Toggle>\n//                                 <Dropdown.Menu>\n//                                     {photo.albums.map(album => {\n//                                         return album.name === selectAlbum.name ?\n//                                             <Dropdown.Item\n//                                                 key={album.id}\n//                                                 disabled\n//                                             >\n//                                                 {album.name}\n//                                             </Dropdown.Item>\n//                                             :\n//                                             <Dropdown.Item\n//                                                 key={album.id}\n//                                                 onClick={() => setSelectAlbum(album)}\n//                                             >\n//                                                 {album.name}\n//                                             </Dropdown.Item>\n//                                     })}\n//                                 </Dropdown.Menu>\n//                             </Dropdown>\n//                         </Col>\n//                     </Row>\n//                     {/*Img*/}\n//                     <Row className=\"mt-4\">\n//                         <Col xs={3} className=\"d-flex flex-column justify-content-center text-center\">\n//                             Текущее изображение: <br/>\n//                             <Image style={{margin: \"0 auto\", marginTop: 15}} width={150} src={process.env.REACT_APP_API_URL + photoCurr.img}/>\n//                         </Col>\n//                         {img && <Col xs={6} className=\"d-flex flex-column justify-content-center text-center\">\n//                             Новое изображение: <br/>\n//                             <Image style={{margin: \"0 auto\", marginTop: 15}} width={150} src={img}/>\n//                         </Col>}\n//                         <Col xs={3} className=\"d-flex align-items-center\">\n//                             <Form.Group controlId=\"formFile\" className=\"mb-3\">\n//                                 <Form.Group>\n//                                     <Form.File id=\"exampleFormControlFile1\" label=\"Загрузить файл\" onChange={imgHandler}/>\n//                                 </Form.Group>\n//                             </Form.Group>\n//                         </Col>\n//                     </Row>\n//                     <Row className=\"mt-5\">\n//                         <Col xs={12}>\n//                             {isDisabledPutBtn ? <Button disabled>Обновить услугу</Button> : <Button onClick={putPhoto}>Обновить услугу</Button>}\n//                             <Button className=\"ml-5\" variant=\"danger\" onClick={handleShow}>Удалить услугу</Button>\n//                         </Col>\n//                     </Row>\n//                 </Col>\n//             </Row>\n//             <Modal show={show} onHide={handleClose}>\n//                 <Modal.Header closeButton>\n//                     <Modal.Title>Удалить фото {photoCurr.id}?</Modal.Title>\n//                 </Modal.Header>\n//                 <Modal.Footer>\n//                     <Button variant=\"secondary\" onClick={handleClose}>\n//                         Отмена\n//                     </Button>\n//                     <Button variant=\"primary\" onClick={deletePhoto}>\n//                         Удалить\n//                     </Button>\n//                 </Modal.Footer>\n//             </Modal>\n//         </Container>\n//     );\n// };\n// export default PhotoPageEdit;","map":{"version":3,"sources":["/Users/denismyachin/Downloads/проекты/online-store-master/front/src/pages/PhotoPageEdit.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["// import React, {useContext, useEffect, useState} from 'react';\n// import {Button, Col, Container, Dropdown, Form, Image, Modal, Row} from \"react-bootstrap\";\n// import {useParams, useHistory} from 'react-router-dom';\n// import {fetchDeletePhoto, fetchOnePhoto, updatePhotos} from \"../http/photoAPI\";\n// import {Context} from \"../index\";\n//  import {ADMIN_PHOTO_ROUTE} from \"../utils/consts\";\n\n// const PhotoPageEdit = () => {\n//     const {photo} = useContext(Context);\n//     const history = useHistory();\n//     const {id} = useParams();\n//     const [photoCurr, setPhotoCurr] = useState({});\n//     const [showMsg, setShowMsg] = useState(false);\n//     const [msg, setMsg] = useState(\"\");\n//     const [selectAlbum, setSelectAlbum] = useState({});\n//     const [img, setImg] = useState(\"\");\n//     const [imgFile, setImgFile] = useState(null);\n\n//     const [isDisabledPutBtn, setDisabledPutBtn] = useState(true);\n\n//     const deletePhoto = () => {\n//         fetchDeletePhoto(id).then(() => {\n//             history.push(ADMIN_PHOTO_ROUTE);\n//         })\n//     }\n\n//     const [show, setShow] = useState(false);\n//     const handleClose = () => setShow(false);\n//     const handleShow = () => setShow(true);\n\n//     const imgHandler = e => {\n//         e.preventDefault();\n\n//         const reader = new FileReader();\n//         reader.onload = () => {\n//             setImg(reader.result);\n//         };\n//         reader.readAsDataURL(e.target.files[0]);\n//         setImgFile(e.target.files[0]);\n//     }\n\n//     const putPhoto = () => {\n//         const formData = new FormData();\n//         formData.append('img', imgFile);\n//         formData.append('albumId', selectAlbum.id);\n//         updateServices(id, formData).then(data => {\n//             setShowMsg(true);\n//             setMsg(data);\n//             setTimeout(() => setShowMsg(true), 5000)\n//         });\n//     }\n\n//     useEffect(() => {\n//         let checkInfoVal = false;\n//         if(photoCurr.info && photoCurr.info.length !== info.length) {\n//             checkInfoVal = checkInfo();\n//         }\n\n//         if(photoCurr && photoCurr.album) {\n//             if(photoCurr.album.name !== selectAlbum.name ||\n//                 img\n//             ) {\n//                 setDisabledPutBtn(false);\n//             } else {\n//                 setDisabledPutBtn(true);\n//             }\n//         }\n//     }, [img]);\n\n//     useEffect(() => {\n//         fetchOnePhoto(id).then(data => {\n//             setPhotoCurr(data);\n//             setSelectAlbum(data.album);\n//         });\n//     }, [id]);\n\n//     return (\n//         <Container className=\"mt-3\">\n//             {showMsg && <Row className='d-flex, align-items-center justify-content-center'><div style={{background: '#28a745', marginLeft: 15, borderRadius: 5, color: 'white', padding: 6}}>\n//                 {msg}\n//             </div>\n//             </Row>}\n\n//             <Row className='mt-3'>\n//                 <Col xs={12}>\n//                     <Row>\n//                         <Col xs={1} className=\"d-flex align-items-center\">\n//                             id:\n//                         </Col>\n//                         <Col xs={11}>\n//                             {photoCurr.id}\n//                         </Col>\n//                     </Row>\n//                     {/*Album*/}\n//                     <Row>\n//                         <Col xs={1} className=\"d-flex align-items-center\">\n//                             Альбом:\n//                         </Col>\n//                         <Col xs={11}>\n//                             <Dropdown className=\"mt-2 mb-2\">\n//                                 <Dropdown.Toggle>{selectAlbum.name || \"Выберите тип\"}</Dropdown.Toggle>\n//                                 <Dropdown.Menu>\n//                                     {photo.albums.map(album => {\n//                                         return album.name === selectAlbum.name ?\n//                                             <Dropdown.Item\n//                                                 key={album.id}\n//                                                 disabled\n//                                             >\n//                                                 {album.name}\n//                                             </Dropdown.Item>\n//                                             :\n//                                             <Dropdown.Item\n//                                                 key={album.id}\n//                                                 onClick={() => setSelectAlbum(album)}\n//                                             >\n//                                                 {album.name}\n//                                             </Dropdown.Item>\n//                                     })}\n//                                 </Dropdown.Menu>\n//                             </Dropdown>\n//                         </Col>\n//                     </Row>\n                \n\n//                     {/*Img*/}\n//                     <Row className=\"mt-4\">\n//                         <Col xs={3} className=\"d-flex flex-column justify-content-center text-center\">\n//                             Текущее изображение: <br/>\n//                             <Image style={{margin: \"0 auto\", marginTop: 15}} width={150} src={process.env.REACT_APP_API_URL + photoCurr.img}/>\n//                         </Col>\n//                         {img && <Col xs={6} className=\"d-flex flex-column justify-content-center text-center\">\n//                             Новое изображение: <br/>\n//                             <Image style={{margin: \"0 auto\", marginTop: 15}} width={150} src={img}/>\n//                         </Col>}\n//                         <Col xs={3} className=\"d-flex align-items-center\">\n//                             <Form.Group controlId=\"formFile\" className=\"mb-3\">\n//                                 <Form.Group>\n//                                     <Form.File id=\"exampleFormControlFile1\" label=\"Загрузить файл\" onChange={imgHandler}/>\n//                                 </Form.Group>\n//                             </Form.Group>\n//                         </Col>\n//                     </Row>\n\n//                     <Row className=\"mt-5\">\n//                         <Col xs={12}>\n//                             {isDisabledPutBtn ? <Button disabled>Обновить услугу</Button> : <Button onClick={putPhoto}>Обновить услугу</Button>}\n//                             <Button className=\"ml-5\" variant=\"danger\" onClick={handleShow}>Удалить услугу</Button>\n//                         </Col>\n//                     </Row>\n//                 </Col>\n//             </Row>\n\n//             <Modal show={show} onHide={handleClose}>\n//                 <Modal.Header closeButton>\n//                     <Modal.Title>Удалить фото {photoCurr.id}?</Modal.Title>\n//                 </Modal.Header>\n//                 <Modal.Footer>\n//                     <Button variant=\"secondary\" onClick={handleClose}>\n//                         Отмена\n//                     </Button>\n//                     <Button variant=\"primary\" onClick={deletePhoto}>\n//                         Удалить\n//                     </Button>\n//                 </Modal.Footer>\n//             </Modal>\n//         </Container>\n//     );\n// };\n\n// export default PhotoPageEdit;\n\n"]},"metadata":{},"sourceType":"module"}